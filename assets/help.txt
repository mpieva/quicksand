Usage: nextflow run mpieva/quicksand -r 1.6.1 {--bam PATH --rg PATH | --split DIR} --db PATH --genome PATH --bedfiles PATH [options] -profile singularity

required arguments:
  Either:
  --bam        FILE   Multiplexed input BAM file (merged)
  --rg         FILE   Tab-separated file containing index combinations
                        - format of file: 'LibID<tab>P7<tab>P5'
  Or:
  --split      DIR    Directory with already split files
                        - Filenames should be: 'RG.{bam, fastq, fastq.gz, fq.gz, fq}'
                        - Note: Files will be interpreted as SR (merged), PE reads get filtered out by default, PE fastq files are imported to bam as SR
  And:
  --db         DIR    Path to kraken database directory
  --genomes    DIR    Path to directory containing the reference genomes for alignment
  --bedfiles   DIR    Path to directory containing the bedfiles masking the genomes for alignment

optional arguments:
  --rerun             Works together with --fixed flag,
                      Start with the extracted reads, map the extracted reads against all fixed reference genomes

  --fixed      FILE   A file to fix a reference genome for a family. Reads assigned by kraken to the given family are only mapped to the fixed reference
                        - Format: 'Family<tab>Species(tag)<tab>Genome'
                        - Genome must be an absolute path to a fasta file
                        - Families fixed on a reference genome have a special processing pipeline that includes
                            - Skipped bedfiltering
                            - Extraction of deaminated reads
                            - Creation of mpileup files for lineage analysis
  --taxlvl     VAL    ['f' or 'o'] The taxonomic level of kraken assignments used for extracting reads (default: f).
                        - e.g. if 'o' is picked, reads assigned to 'Primates' will be mapped to 'Homo_sapiens' reference genomes instead of only the 'Hominidae' reads
                        - the 'best' reference genomes are still picked by the best guess per family

process arguments:
  --bamfilterflag               N    The bitwise filterflag used by samtools to filter the input bam files (default: 1)
                                       - 0: no filter, 1: filter paired, 4: filter unmapped, 5: filter both
  --bamfilter_length_cutoff     N    Length cutoff for extracted bam (default: 35)
  --bamfilter_quality_cutoff    N    Quality filter for extracted bam (default: 25)
  --krakenuniq_min_kmers        N    Filter: minimal required unique kmers (krakenuniq) assigned to a family (default: 129)
  --krakenuniq_min_reads        N    Filter: minimal required number of reads assigend to a family by krakenuniq (default: 3)
  --compression_level           N    Set BGZF compression level (default: 0)


PROFILES:
The following execution profiles are available (see '-profile' above):
  * singularity      run all processes in a singularity container
  * docker           run all processes in a docker container
  * test             run all processes using the included test data
  * debug            dont remove intermediate files after run
